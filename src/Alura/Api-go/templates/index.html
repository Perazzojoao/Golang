{{define "Index"}}

{{template "_head"}}

	<body class="bg-zinc-900 text-gray-200 py-5 px-2 sm:px-5 lg:px-[100px] 2xl:px-[300px]">
		{{template "_menu"}}

		<div class="flex justify-center pt-[100px] text-left text-sm sm:text-base">
			<div
				class="flex flex-col gap-1 sm:gap-3 bg-zinc-800 rounded-lg w-full h-auto p-1 sm:p-5 shadow-lg shadow-black"
			>
				<table class="bg-zinc-800 w-full h-auto">
					<thead class="border-zinc-600 border-b-2 min-h-[40px]">
						<tr>
							<th>Nome</th>
							<th class="w-2xl">Descrição</th>
							<th>Preço</th>
							<th>Estoque</th>
							<th><div class="flex justify-center">...</div></th>
						</tr>
					</thead>
					<tbody>
						{{range .}}
						<tr class="border-zinc-700 border-b hover:bg-zinc-700 min-h-[40px]">
							<td>{{.Nome}}</td>
							<td>{{.Descricao}}</td>
							<td>{{.Preco}}</td>
							<td>{{.Estoque}}</td>
							<td>
								<div class="my-3">
									<div class="flex gap-1 sm:gap-3 justify-center">
										<a
											href="/edit?id={{.Id}}"
											class="bg-amber-600 hover:bg-amber-500 rounded-sm px-1 sm:px-2 py-1"
											>Editar</a
										>
										<button
											onclick="confirmaDelete('{{.Id}}')"
											class="bg-red-700 hover:bg-red-600 rounded-sm px-1 sm:px-2 py-1"
										>
											Deletar
										</button>
									</div>
								</div>
							</td>
						</tr>
						{{end}}
					</tbody>
				</table>
				<a
					href="/new"
					class="bg-blue-700 px-2 sm:px-4 py-2 w-fit text-xs sm:text-base rounded-lg hover:bg-blue-600"
					>Adicionar produto</a
				>
			</div>
		</div>
		<script defer>
			function confirmaDelete(id) {
				let resposta = confirm('Você tem certeza que deseja deletar este produto?');

				if (resposta) {
					window.location = '/delete?id=' + id;
				} else {
					window.location = '/';
				}
			}
		</script>
	</body>
</html>

{{end}}
